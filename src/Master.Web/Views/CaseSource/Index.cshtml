@using Master.Web.Components
@{
    ViewData["Title"] = "Index";
}

<div class="layui-fluid" id="LAY-app-message">

    <div class="layui-card">
        <div class="layui-card-header bold"><i class="layui-icon layui-icon-next"></i>@L("判例库管理")</div>
        <div class="layui-card-body">
            <div class="LAY-app-message-btns" style="margin-bottom: 10px;">
                <vc:module-button module-key="CaseSource"></vc:module-button>
                <input type="text" id="keyword" class="layui-input" style="width: 150px; display: inline-block;height: 30px;vertical-align: middle;" placeholder="案号检索" />
                <button class="layui-btn  layui-btn-sm" onclick="config.reloadTable()">搜索</button>
            </div>
            <vc:module-table param="@(new ModuleTableViewParam() {ID="CaseSource",ModuleKey="CaseSource",Height="full-250",Where="" })"></vc:module-table>

        </div>

    </div>
</div>

@section scripts{
    <script>
        var app;
        var searchKeys = {};
        
        config.ready = function () {
            
        };
        config.refresh = function () {
           
        };
        config.reloadTable = function () {
            layui.table.reload('CaseSource', {
                where: getWhere()
            })
        }
        function getWhere(index) {
            var where = { searchKeys: JSON.stringify(searchKeys) ,where:'1=1'};
            var value = $('#keyword').val();
            if (value) {
                where.where += " and SourceSN.Contains(\"" + value + "\")"
            }
            
            where.searchCondition = func.buildSearchCondition('CaseSource');

            return where;

        }
    </script>
}

